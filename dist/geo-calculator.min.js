/*! geo-calculator 2014-12-30 */
"use strict";Math.fmod=function(a,b){return Number((a-Math.floor(a/b)*b).toPrecision(8))},String.format||(String.format=function(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(a,c){return"undefined"!=typeof b[c]?b[c]:a})});var pi=Math.PI,r=6378137,geoCalculator={};module.exports=geoCalculator,geoCalculator.about=function(){console.log("GeoCalculator")},geoCalculator.distance=function(a,b){var c=a[0]/180*pi,d=a[1]/180*pi,e=b[0]/180*pi,f=b[1]/180*pi,g=Math.acos(Math.sin(d)*Math.sin(f)+Math.cos(d)*Math.cos(f)*Math.cos(e-c));return g*r},geoCalculator.alpha=function(a,b){var c=a[0]/180*pi,d=a[1]/180*pi,e=b[0]/180*pi,f=b[1]/180*pi,g=Math.acos(Math.sin(d)*Math.sin(f)+Math.cos(d)*Math.cos(f)*Math.cos(e-c)),h=Math.acos((Math.sin(f)-Math.sin(d)*Math.cos(g))/(Math.cos(d)*Math.sin(g)));return e>c?360-180*h/pi:180*h/pi},geoCalculator.point2=function(a,b){if(!isValid(a)){var c='{"point1":[54.0,10.0],"distance":111318,"angle":30}',d="#ERROR: geoCalculator says:\n";return d+=" Wrong input parameter: {0}\n",d+=" An example for input parameter: {1}",d=String.format(d,a,c),b(new Error(d))}var e=a.point1[0]/180*pi,f=a.point1[1]/180*pi,g=a.angle/180*pi,h=a.distance/r,i=0==Math.cos(f)?e:Math.fmod(e-Math.asin(Math.sin(-g)*Math.sin(h)/Math.cos(f))+pi,2*pi)-pi,j=Math.asin(Math.sin(f)*Math.cos(h)+Math.cos(f)*Math.sin(h)*Math.cos(-g));return i=180*i/pi,j=180*j/pi,b(null,[1*i.toFixed(6),1*j.toFixed(6)])};var isValid=function(a){return!1===Object?!1:null===a?!1:void 0===a.point1?!1:void 0===a.point1[0]?!1:void 0===a.point1[1]?!1:void 0===a.angle?!1:void 0===a.distance?!1:!0};