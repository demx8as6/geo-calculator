/*! geo-calculator 2015-01-01 */
"use strict";String.format||(Math.fmod=function(a,b){return Number((a-Math.floor(a/b)*b).toPrecision(8))}),String.format||(String.format=function(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(a,c){return"undefined"!=typeof b[c]?b[c]:a})});var pi=Math.PI,r=6378137,geoCalculator={};module.exports=geoCalculator,geoCalculator.about=function(){console.log("Geo Calculator")},geoCalculator.distance=function(a,b){var c=a[0]/180*pi,d=a[1]/180*pi,e=b[0]/180*pi,f=b[1]/180*pi,g=Math.acos(Math.sin(c)*Math.sin(e)+Math.cos(c)*Math.cos(e)*Math.cos(f-d));return g*r},geoCalculator.alpha=function(a,b){var c=a[0]/180*pi,d=a[1]/180*pi,e=b[0]/180*pi,f=b[1]/180*pi,g=Math.acos(Math.sin(c)*Math.sin(e)+Math.cos(c)*Math.cos(e)*Math.cos(f-d)),h=Math.acos((Math.sin(e)-Math.sin(c)*Math.cos(g))/(Math.cos(c)*Math.sin(g)));return f>d?360-180*h/pi:180*h/pi},geoCalculator.point2=function(a,b){if(!isValid(a)){var c='{"point1":[10.0,54.0],"distance":111318,"azimuth":30}',d="#ERROR: geo-calculator says:\n";return d+=" Wrong input parameter: {0}\n",d+=" An example for input parameter: {1}",d=String.format(d,JSON.stringify(a),c),b(new Error(d))}var e=a.point1[0]/180*pi,f=a.point1[1]/180*pi,g=a.azimuth/180*pi,h=a.distance/r,i=Math.asin(Math.sin(e)*Math.cos(h)+Math.cos(e)*Math.sin(h)*Math.cos(-g)),j=0==Math.cos(e)?f:Math.fmod(f-Math.asin(Math.sin(-g)*Math.sin(h)/Math.cos(e))+pi,2*pi)-pi;return j=180*j/pi,i=180*i/pi,b(null,[1*i.toFixed(6),1*j.toFixed(6)])};var isValid=function(a){return typeof a!==Object?!1:null===a?!1:void 0===a.point1?!1:void 0===a.point1[0]?!1:void 0===a.point1[1]?!1:void 0===a.azimuth?!1:void 0===a.distance?!1:!0};